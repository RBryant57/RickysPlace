@model IEnumerable<ShootingManager.Web.ViewModels.CartridgeLoadViewModel>

@{
    ViewBag.Title = "Cartridge Load Index";
}
<head>
    <title>Shooting Manager: Cartridge Load Index</title>
</head>
<div class="container">
    <div class="row">
        @Html.ActionLink("Shooting Manager Home", "Index", "Home", null, new { @class = "NavLinkStyle" }) | @Html.ActionLink("Build Cartridges/Loads", "Index", "Build", null, new { @class = "NavLinkStyle" })
    </div>
    <br />
    <h3>@ViewBag.CaliberName : Cartridge Loads</h3>
    <br />
    @{if(ViewBag.CaliberName == "All Calibers")
      {
        @Html.ActionLink("Create New Cartridge Load", "Load", new { id = ViewBag.CaliberId }, new { @class = "EditLinkStyle" })
      }
      else
      {
        string link = "Create New Cartridge Load For: " + ViewBag.CaliberName;
        @Html.ActionLink(link, "Load", new { id = ViewBag.CaliberId }, new { @class = "EditLinkStyle" })
      }
    }
    <br />
    @Html.ActionLink("Create New Cartridge Load", "Load", null, new { @class = "EditLinkStyle" })
    <br />
    @{if (ViewBag.CaliberId != null)
      {
          <a class="EditLinkStyle" href=@Request.Url.ToString().Substring(0, @Request.Url.ToString().Length - 2)>View All CartridgeLoads</a>
      }
      else
      {
          <a class="EditLinkStyle" href=@Request.Url>View All CartridgeLoads</a>
      }
    }
    @*<a class="EditLinkStyle" href=@(@Request.Url.ToString().Substring(0, @Request.Url.ToString().Length - 2))>View All CartridgeLoads</a>*@
    @*@Html.ActionLink("View All Cartridge Loads", "LoadIndex", null, new { @class = "EditLinkStyle" })*@
    <hr />
    <br />
    
    <table class="tablesorter" id="shootingtable">
        <thead>
            <tr>
                <th>
                    @Html.DisplayName("Bullet Name")
                </th>
                <th>
                    @Html.DisplayName("Caliber")
                </th>
                <th>
                    @Html.DisplayName("Powder")
                </th>
                <th>
                    @Html.DisplayName("Amount")
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.CartridgeLoad.COL)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.CartridgeLoad.Velocity)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.CartridgeLoad.Pressure)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model) 
            {
                <tr>
                    <td>
                        @*@Html.DisplayFor(modelItem => item.BulletName)*@
                        @Html.ActionLink(item.BulletName, "Details", "Bullet", new { id = item.BulletId }, new { @class = "EditLinkStyle" })
                    </td>
                    <td>
                        @*@Html.DisplayFor(modelItem => item.CartridgeLoad.Caliber.Name)*@
                        @Html.ActionLink(item.CartridgeLoad.Caliber.Name, "Details", "Caliber", new { id = item.CartridgeLoad.Caliber.Id }, new { @class = "EditLinkStyle" })
                    </td>
                    <td>
                        @*@Html.DisplayFor(modelItem => item.CartridgeLoad.Powder.Name)*@
                        @Html.ActionLink(item.CartridgeLoad.Powder.Name, "Details", "Powder", new { id = item.CartridgeLoad.Powder.Id }, new { @class = "EditLinkStyle" })
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CartridgeLoad.PowderWeight)
                        @Html.DisplayFor(modelItem => item.CartridgeLoad.Unit.Abbreviation)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CartridgeLoad.COL)
                        @Html.DisplayFor(modelItem => item.CartridgeLoad.Unit1.Abbreviation)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CartridgeLoad.Velocity)
                        @Html.DisplayFor(modelItem => item.CartridgeLoad.Unit2.Abbreviation)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CartridgeLoad.Pressure)
                        @Html.DisplayFor(modelItem => item.CartridgeLoad.Unit3.Abbreviation)
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "EditLoad", new { id = item.CartridgeLoad.Id }, new { @class = "EditLinkStyle" }) |
                        @Html.ActionLink("Details", "LoadDetails", new { id = item.CartridgeLoad.Id }, new { @class = "EditLinkStyle" }) |
                        @Html.ActionLink("Delete", "DeleteLoad", new { id = item.CartridgeLoad.Id }, new { @class = "EditLinkStyle" })
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jquery")
    <script type="text/JavaScript">
        $(document).ready(function () {
            $("#shootingtable").tablesorter();
        }
        );
    </script>
}